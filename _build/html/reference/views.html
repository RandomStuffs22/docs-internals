
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Views &mdash; Phalcon 0.4.4 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/configurationblock.css" type="text/css" />
    <!--
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/layout.css" type="text/css" />
    -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Rosario" type="text/css">
    <!-- link rel="stylesheet" href="http://phalconphp.com/css/s.css" type="text/css" -->
    <link rel="stylesheet" href="../_static/s.css" type="text/css">    
    <link rel="stylesheet" href="../_static/docs.css" type="text/css">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <!--<script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>-->

    <script type="text/javascript">
    <!--
        $(document).ready(function() {
            $("#versions").change(function() {
                var docsUrl = $(this).val();
                window.location.href = docsUrl;
            });
        });
    -->
    </script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Phalcon 0.4.4 documentation" href="../index.html" />
    <link rel="next" title="View Helpers" href="tags.html" />
    <link rel="prev" title="Working with Models" href="models.html" /> 
  </head>
  <body>
    <div id="wrapper">

      <div id="header">        
        <h1><a href="http://phalconphp.com/index" ><img border="0" src="../_static/img/logo-small.png"></a></h1>
        <div align="center">
          <div id="nav-main" role="navigation">
            <div class="menubar">
              <div class="nav-main-features nav-first"><a href="http://phalconphp.com/index" >HOME</a></div>
              <div class="nav-main-features nav-first"><a href="http://phalconphp.com/download" >DOWNLOAD</a></div>
              <div class="nav-main-features"><a href="http://docs.phalconphp.com" >DOCUMENTATION</a></div>
              <div class="nav-main-features"><a href="https://groups.google.com/forum/#!forum/phalcon">SUPPORT</a></div>
              <div class="nav-main-features nav-first"><a href="https://github.com/phalcon/cphalcon">GITHUB</a></div>
              <div class="nav-main-features"><a target="blog" href="http://blog.phalconphp.com/">BLOG</a></div>
            </div>
          </div>
        </div>
      </div>
    <div class="related">      
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tags.html" title="View Helpers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="models.html" title="Working with Models"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 0.4.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            
            <div id="searchbox" style="">
              <h3>Search</h3>
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="text" name="q" size="18">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Using Views</a><ul>
<li><a class="reference internal" href="#integrating-views-with-controllers">Integrating Views with Controllers</a></li>
<li><a class="reference internal" href="#using-partials">Using Partials</a></li>
<li><a class="reference internal" href="#transfer-values-from-the-controller-to-views">Transfer values from the controller to views</a></li>
<li><a class="reference internal" href="#control-rendering-levels">Control Rendering Levels</a></li>
<li><a class="reference internal" href="#using-models-in-the-view-layer">Using models in the view layer</a></li>
<li><a class="reference internal" href="#picking-views">Picking Views</a><ul>
<li><a class="reference internal" href="#caching-view-fragments">Caching View Fragments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#template-engines">Template Engines</a><ul>
<li><a class="reference internal" href="#changing-the-template-engine">Changing the Template Engine</a></li>
<li><a class="reference internal" href="#using-mustache">Using Mustache</a></li>
<li><a class="reference internal" href="#using-twig">Using Twig</a></li>
<li><a class="reference internal" href="#creating-your-own-template-engine">Creating your own Template Engine</a></li>
</ul>
</li>
<li><a class="reference internal" href="#view-environment">View Environment</a></li>
<li><a class="reference internal" href="#stand-alone-component">Stand-Alone Component</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="models.html"
                                  title="previous chapter">Working with Models</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="tags.html"
                                  title="next chapter">View Helpers</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/views.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">  
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                <div class="body" >
                      
  <div class="section" id="using-views">
<h1>Using Views<a class="headerlink" href="#using-views" title="Permalink to this headline">¶</a></h1>
<p>Views represent the user interface of your application. Views are often HTML files with embedded PHP code that perform tasks related solely to the presentation of the data. Views handle the job of providing data to the web browser or other tool that is used to make requests from your application.</p>
<p>The <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> is responsible for the managing the view layer of your MVC application.</p>
<p>A hierarchy of files is supported by the component. This hierarchy allows for common layout points (commonly used views), as well as controller named folders defining respective view templates.</p>
<div class="section" id="integrating-views-with-controllers">
<h2>Integrating Views with Controllers<a class="headerlink" href="#integrating-views-with-controllers" title="Permalink to this headline">¶</a></h2>
<p>Phalcon automatically passes the execution to the view component as soon as a particular controller has completed its cycle. The view component will look in the views folder for a folder named as the same name of the last controller executed and then for a file named as the last action executed. For instance, if a request is made to the URL <em>http://127.0.0.1/blog/posts/show/301</em>, Phalcon will parse the URL as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Server Address</td>
<td>127.0.0.1</td>
</tr>
<tr class="row-even"><td>Phalcon Directory</td>
<td>blog</td>
</tr>
<tr class="row-odd"><td>Controller</td>
<td>posts</td>
</tr>
<tr class="row-even"><td>Action</td>
<td>show</td>
</tr>
<tr class="row-odd"><td>Parameter</td>
<td>301</td>
</tr>
</tbody>
</table>
<p>The dispatcher will look for a &#8220;PostsController&#8221; and its action &#8220;showAction&#8221;. A simple controller file for this example:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$postId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Pass the $postId parameter to the view</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;postId&quot;</span><span class="p">,</span> <span class="nv">$postId</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The setVar allows us to create view variables on demand so that they can be used in the view template. The example above demonstrates how to pass the $postId parameter to the respective view template.</p>
<p><a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> uses PHP itself as the template engine, therefore views should have the .phtml extension. If the views directory is  <em>app/views</em> then view component will find automatically for these 3 view files.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="12%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">File</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Action View</td>
<td>app/views/posts/show.phtml</td>
<td>This is the view related to the action. It only will be shown when the &#8220;show&#8221; action was executed.</td>
</tr>
<tr class="row-odd"><td>Controller Layout</td>
<td>app/views/layouts/posts.phtml</td>
<td>This is the view related to the controller. It only will be shown for every action executed within the controller &#8220;posts&#8221;. All the code implemented in the layout will reused for all the actions in this controller.</td>
</tr>
<tr class="row-even"><td>Main Layout</td>
<td>app/views/index.phtml</td>
<td>This is main action it will be shown for every controller or action executed within the application.</td>
</tr>
</tbody>
</table>
<p>You are not required to implement all of the files mentioned above. <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> will simply move to the next view level in the hierarchy of files. If all three view files are implemented, they will be processed as follows:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/views/posts/show.phtml --&gt;</span>

<span class="nt">&lt;h3&gt;</span>This is show view!<span class="nt">&lt;/h3&gt;</span>

<span class="nt">&lt;p&gt;</span>I have received the parameter <span class="cp">&lt;?php</span> <span class="nv">$postId</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/views/layouts/posts.phtml --&gt;</span>

<span class="nt">&lt;h2&gt;</span>This is the &quot;posts&quot; controller layout!<span class="nt">&lt;/h2&gt;</span>

<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">()</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
<div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/views/index.phtml --&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Example<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;h1&gt;</span>This is main layout!<span class="nt">&lt;/h1&gt;</span>

        <span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">()</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Note the lines where the method <em>$this-&gt;getContent()</em> was called. This method instructs <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> on where to inject the contents of the previous view executed in the hierarchy. For the example above, the output will be:</p>
<div class="figure align-center">
<img alt="../_images/views-1.png" src="../_images/views-1.png" />
</div>
<p>The generated HTML by the request will be:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/views/index.phtml --&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Example<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;h1&gt;</span>This is main layout!<span class="nt">&lt;/h1&gt;</span>

        <span class="c">&lt;!-- app/views/layouts/posts.phtml --&gt;</span>

        <span class="nt">&lt;h2&gt;</span>This is the &quot;posts&quot; controller layout!<span class="nt">&lt;/h2&gt;</span>

        <span class="c">&lt;!-- app/views/posts/show.phtml --&gt;</span>

        <span class="nt">&lt;h3&gt;</span>This is show view!<span class="nt">&lt;/h3&gt;</span>

        <span class="nt">&lt;p&gt;</span>I have received the parameter 101<span class="nt">&lt;/p&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-partials">
<h2>Using Partials<a class="headerlink" href="#using-partials" title="Permalink to this headline">¶</a></h2>
<p>Partial templates are another way of breaking the rendering process into simpler more manageable chunks that can be reused by different parts of the application. With a partial, you can move the code for rendering a particular piece of a response to its own file.</p>
<p>One way to use partials is to treat them as the equivalent of subroutines: as a way to move details out of a view so that your code can be more easily understood. For example, you might have a view that looks like this:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">partial</span><span class="p">(</span><span class="s2">&quot;shared/ad_banner&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>Check out our specials for robots:<span class="nt">&lt;/p&gt;</span>
...

<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">partial</span><span class="p">(</span><span class="s2">&quot;shared/footer&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="transfer-values-from-the-controller-to-views">
<h2>Transfer values from the controller to views<a class="headerlink" href="#transfer-values-from-the-controller-to-views" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> is available in each controller using the view variable ($this-&gt;view). You can use that object to set variables directly to the view from a controller action by using the setVar() method.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//Pass all the posts to the views</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;posts&quot;</span><span class="p">,</span> <span class="nx">Posts</span><span class="o">:</span><span class="nx">find</span><span class="p">());</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>A variable with the name of the first parameter of setView() will be created in the view, ready to be used. The variable can be of any type, from a simple string, integer etc. variable to a more complex structure such as array, collection etc.</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
<span class="cp">&lt;?php</span>

  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$posts</span> <span class="k">as</span> <span class="nv">$post</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;h1&gt;&quot;</span><span class="p">,</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">,</span> <span class="s2">&quot;&lt;/h1&gt;&quot;</span><span class="p">;</span>
  <span class="p">}</span>

<span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="control-rendering-levels">
<h2>Control Rendering Levels<a class="headerlink" href="#control-rendering-levels" title="Permalink to this headline">¶</a></h2>
<p>As seen above, <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> supports a view hierarchy. You might need to control the level of rendering produced by the view component. The method Phalcon_View::setRenderLevel() offers this functionality.</p>
<p>This method can be invoked from the controller or from a superior view layer to interfere with the rendering process.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">findAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// This is an Ajax response so don&#39;t generate any kind of view</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setRenderLevel</span><span class="p">(</span><span class="nx">Phalcon_View</span><span class="o">::</span><span class="na">LEVEL_NO_RENDER</span><span class="p">);</span>

        <span class="c1">//...</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$postId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Shows only the view related to the action</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setRenderLevel</span><span class="p">(</span><span class="nx">Phalcon_View</span><span class="o">::</span><span class="na">LEVEL_ACTION_VIEW</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The available render levels are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class Constant</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LEVEL_NO_RENDER</td>
<td>Indicates to avoid generating any kind of presentation.</td>
</tr>
<tr class="row-odd"><td>LEVEL_ACTION_VIEW</td>
<td>Generates the presentation to the view associated to the action.</td>
</tr>
<tr class="row-even"><td>LEVEL_BEFORE_TEMPLATE</td>
<td>Generates presentation templates prior to the controller layout.</td>
</tr>
<tr class="row-odd"><td>LEVEL_LAYOUT</td>
<td>Generates the presentation to the controller layout.</td>
</tr>
<tr class="row-even"><td>LEVEL_AFTER_TEMPLATE</td>
<td>Generates the presentation to the templates after the controller layout.</td>
</tr>
<tr class="row-odd"><td>LEVEL_MAIN_LAYOUT</td>
<td>Generates the presentation to the main layout. File views/index.phtml</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-models-in-the-view-layer">
<h2>Using models in the view layer<a class="headerlink" href="#using-models-in-the-view-layer" title="Permalink to this headline">¶</a></h2>
<p>Application models are always available at the view layer. The <a class="reference internal" href="../api/Phalcon_Loader.html"><em>Phalcon Loader</em></a> will instantiate them at runtime automatically:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;categories&quot;</span><span class="nt">&gt;</span>
<span class="cp">&lt;?php</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nx">Catergories</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="s2">&quot;status = 1&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$category</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">echo</span> <span class="s2">&quot;&lt;span class=&#39;category&#39;&gt;&quot;</span><span class="p">,</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Although you may perform model manipulation operations such as insert() or update() in the view layer, it is not recommended since it is not possible to forward the execution flow to another controller in the case of an error or an exception.</p>
</div>
<div class="section" id="picking-views">
<h2>Picking Views<a class="headerlink" href="#picking-views" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, when <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> is managed by <a class="reference internal" href="../api/Phalcon_Controller_Front.html"><em>Phalcon_Controller_Front</em></a> the view rendered is the one related with the last controller and action executed. You could override this by using the Phalcon_View::pick() method:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">ProductsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">listAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Pick &quot;views-dir/products/search&quot; as view to render</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">pick</span><span class="p">(</span><span class="s2">&quot;products/search&quot;</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="caching-view-fragments">
<h3>Caching View Fragments<a class="headerlink" href="#caching-view-fragments" title="Permalink to this headline">¶</a></h3>
<p>Sometimes when you develop dynamic websites and some areas of them are not updated very often, the output is exactly the same between requests. <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> offers caching a part or the whole rendered output to increase performance.</p>
<p><a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> integrates with <a class="reference internal" href="../api/Phalcon_Cache.html"><em>Phalcon_Cache</em></a> to provide an easier way to cache output fragments. You could manually set the cache handler or set a global handler:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// Cache data for one day by default</span>
        <span class="nv">$frontendOptions</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
            <span class="s2">&quot;lifetime&quot;</span> <span class="o">=&gt;</span> <span class="mi">86400</span>
        <span class="p">);</span>

        <span class="c1">// File cache settings</span>
        <span class="nv">$backendOptions</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
            <span class="s2">&quot;cacheDir&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;../app/cache/&quot;</span>
        <span class="p">);</span>

        <span class="c1">// Create a memcached cache</span>
        <span class="nv">$cache</span> <span class="o">=</span> <span class="nx">Phalcon_Cache</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span>
            <span class="s2">&quot;Output&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Memcached&quot;</span><span class="p">,</span>
            <span class="nv">$frontendOptions</span><span class="p">,</span>
            <span class="nv">$backendOptions</span>
        <span class="p">);</span>

        <span class="c1">// Set the cache to the view component</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setCache</span><span class="p">(</span><span class="nv">$cache</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//Cache the view using the default settings</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">cache</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showArticleAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Cache this view for 1 hour</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">cache</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">&quot;lifetime&quot;</span> <span class="o">=&gt;</span> <span class="mi">3600</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">resumeAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//Cache this view for 1 day with the key &quot;resume-cache&quot;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">cache</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;lifetime&quot;</span> <span class="o">=&gt;</span> <span class="mi">86400</span><span class="p">,</span>
                <span class="s2">&quot;key&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;resume-cache&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>In the above example, a cache backend was instantiated in the initialize() method of the current controller. You can set the cache initialization options in your configuration file so that they can be easily accessed when needed:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[views]</span>
<span class="na">cache.adapter</span>  <span class="o">=</span> <span class="s">&quot;File&quot;</span>
<span class="na">cache.cacheDir</span> <span class="o">=</span> <span class="s">&quot;cacheDir&quot;</span>
<span class="na">cache.lifetime</span> <span class="o">=</span> <span class="s">86400</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="template-engines">
<h2>Template Engines<a class="headerlink" href="#template-engines" title="Permalink to this headline">¶</a></h2>
<p>From version 0.4.0 onwards, <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> allows you to use other template engines instead of plain PHP. This helps developers to create and design views with less effort. The <a class="reference external" href="https://github.com/bobthecow/mustache.php">Mustache</a> and <a class="reference external" href="http://twig.sensiolabs.org">Twig</a> template engines are supported.</p>
<p>Using a different template engine, usually requires complex text parsing using external PHP libraries in order to generate the final output for the user. This usually increases the number of resources that your application is using.</p>
<p>If an external template engine is used, <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> provides exactly the same view hierarchy and it&#8217;s still possible to access the API inside these templates.</p>
<div class="section" id="changing-the-template-engine">
<h3>Changing the Template Engine<a class="headerlink" href="#changing-the-template-engine" title="Permalink to this headline">¶</a></h3>
<p>You can replace or add more a template engine from the controller as follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Changing PHP engine to Mustache</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="s2">&quot;.mhtml&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Mustache&quot;</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Using both PHP and Mustache engines</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;.phtml&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Php&quot;</span><span class="p">,</span>
                <span class="s2">&quot;.mhtml&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Mustache&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>You can replace the template engine completely or use more than one template engine at the same time. The method Phalcon_View::registerEngines() accepts an array containing data that define the template engines. The key of each engine is an extension that aids in distinguishing one from another. Template files related to the particular engine must have those extensions.</p>
<p>The order that the template engines are defined with Phalcon_View::reginsterEngines() defines the relevance of execution. If <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> finds two views with the same name but different extensions, it will only render the first one.</p>
</div>
<div class="section" id="using-mustache">
<h3>Using Mustache<a class="headerlink" href="#using-mustache" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/bobthecow/mustache.php">Mustache</a> is a logic-less template engine available for many platforms and languages. A PHP implementation is available in <a class="reference external" href="https://github.com/bobthecow/mustache.php">this Github repository</a>.</p>
<p>You need to manually load the Mustache library before use its engine adapter. This can be achieved by either registering an autoload function or including the relevant file first.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">require</span> <span class="s2">&quot;path/to/Mustache.php&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>In the controller it&#8217;s necessary to replace or add the Mustache adapter to the view component. If all of your actions will use this template engine, you can register it in the initialize() method of the controller.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// Changing PHP engine by Mustache</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&quot;.mhtml&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Mustache&quot;</span><span class="p">)</span>
        <span class="p">);</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;showPost&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;some title&quot;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="s2">&quot;a cool content&quot;</span><span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>A related view (views-dir/posts/show.mhtml) could be defined using the Mustache syntax:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="p">{{</span><span class="c1">#showPost}}</span>
    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{{</span><span class="nx">title</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{{</span><span class="nx">body</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
<span class="p">{{</span><span class="o">/</span><span class="nx">showPost</span><span class="p">}}</span>
</pre></div>
</div>
<p>Additionally, as seen above, you must call the method $this-&gt;getContent() inside a view to include the contents of a view at a higher level. In Moustache, this can be done as follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;div class=&quot;some-menu&quot;&gt;</span>
<span class="x">    &lt;! -- the menu --&gt;</span>
<span class="x">&lt;/div&gt;</span>

<span class="x">&lt;div class=&quot;some-main-content&quot;&gt;</span>
<span class="x">    {{getContent}}</span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Finally, it is possible to define your own Mustache instance instead of the one created by the adapter. This offers maximum customization towards your project&#8217;s needs:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// Instancing a mustache object or a sub-class of Mustache</span>
        <span class="nv">$presenter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CustomMustache</span><span class="p">();</span>

        <span class="c1">// ... make some mustache stuff</span>

        <span class="c1">// Registering the object as an option</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;.mhtml&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s2">&quot;Mustache&quot;</span><span class="p">,</span>
                    <span class="k">array</span><span class="p">(</span>
                        <span class="s2">&quot;mustache&quot;</span> <span class="o">=&gt;</span> <span class="nv">$presenter</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="using-twig">
<h3>Using Twig<a class="headerlink" href="#using-twig" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://twig.sensiolabs.org">Twig</a> is a modern template engine for PHP.</p>
<p>You need to manually load the Twig library before use its engine adapter. This could be done by registering its autoloader:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s2">&quot;path/to/twig.php&quot;</span><span class="p">;</span>
<span class="nx">Twig_Autoloader</span><span class="o">::</span><span class="na">register</span><span class="p">();</span>
</pre></div>
</div>
<p>As seen above, it&#8217;s necessary to replace the default engine by twig or use it together with other.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// Changing PHP engine by Twig</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&quot;.twig&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Twig&quot;</span><span class="p">)</span>
        <span class="p">);</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;showPost&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;some title&quot;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="s2">&quot;a cool content&quot;</span><span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>In this case, the related view will be views-dir/posts/show.twig, this is a file that contains Twig code:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="p">{{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">showPost</span> <span class="o">%</span><span class="p">}}</span>
    <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">title</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">body</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
<span class="p">{{</span><span class="o">%</span> <span class="k">endif</span> <span class="o">%</span><span class="p">}}</span>
</pre></div>
</div>
<p>To include the contents of a view at a higher level, the &#8220;content&#8221; variable is available:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;div class=&quot;some-messages&quot;&gt;</span>
<span class="x">    {{ content }}</span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Phalcon implicitly creates a twig object as follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Twig_Loader_Filesystem</span><span class="p">(</span><span class="nv">$viewsDirectory</span><span class="p">);</span>
<span class="nv">$twig</span>   <span class="o">=</span> <span class="k">new</span> <span class="nx">Twig_Environment</span><span class="p">(</span><span class="nv">$loader</span><span class="p">);</span>
</pre></div>
</div>
<p>If you want to modify any of those variables before rendering the views, you can pre-build and pass them as options:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// Creating manually the Twig object</span>
        <span class="nv">$loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Twig_Loader_Filesystem</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">getViewsDir</span><span class="p">());</span>
        <span class="nv">$twig</span>   <span class="o">=</span> <span class="k">new</span> <span class="nx">Twig_Environment</span><span class="p">(</span>
            <span class="nv">$loader</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&quot;cache&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/path/to/compilation_cache&quot;</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="c1">// Registering the object as an option</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;.twig&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s2">&quot;Twig&quot;</span><span class="p">,</span>
                    <span class="k">array</span><span class="p">(</span>
                        <span class="s2">&quot;twig&quot;</span> <span class="o">=&gt;</span> <span class="nv">$twig</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-your-own-template-engine">
<h3>Creating your own Template Engine<a class="headerlink" href="#creating-your-own-template-engine" title="Permalink to this headline">¶</a></h3>
<p>There are many template engines, which you might want to integrate or create one of your own. This section provides the steps to achieve this.</p>
<p>A template adapter is only instantiated once across the execution of the request. Usually it only needs two methods implemented: __contstruct() and render(). The first one receives the <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> instance which creates the engine adapter and the options passed when the engine was registered.</p>
<p>The method render() accepts an absolute path to the view file and the view parameters set using $this-&gt;view-&gt;setVar(). You could read or require it when it&#8217;s necessary.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">MyTemplateAdapter</span> <span class="k">extends</span> <span class="nx">Phalcon_View_Engine</span>
<span class="p">{</span>

    <span class="sd">/**</span>
<span class="sd">     * Adapter constructor</span>
<span class="sd">     *</span>
<span class="sd">     * @param Phalcon_View $view</span>
<span class="sd">     * @param array $options</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Renders a view using the template engine</span>
<span class="sd">     *</span>
<span class="sd">     * @param string $path</span>
<span class="sd">     * @param array $params</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">render</span><span class="p">(</span><span class="nv">$path</span><span class="p">,</span> <span class="nv">$params</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="c1">// Access view</span>
        <span class="nv">$view</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_view</span><span class="p">;</span>

        <span class="c1">// Access options</span>
        <span class="nv">$options</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_options</span><span class="p">;</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>When registering the engine, a instance of your template adapter must be passed along with the desired extension:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">SomeController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">someAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">// Registering the object as an engine</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&quot;.my-html&quot;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">MyTemplateAdapter</span><span class="p">())</span>
        <span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="view-environment">
<h2>View Environment<a class="headerlink" href="#view-environment" title="Permalink to this headline">¶</a></h2>
<p>Every view executed is included inside a <a class="reference internal" href="../api/Phalcon_View_Engine.html"><em>Phalcon_View_Engine</em></a> instance, providing access to the view environment and its properties that can be used in your developments.</p>
<p>The following example shows how to write a jQquery <a class="reference external" href="http://api.jquery.com/jQuery.ajax/">ajax request</a> using a url with the framework conventions. The method url() is called from a $this instance that references the <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> object:</p>
<div class="highlight-php+html"><pre>&lt;script type="text/javascript&gt;"&gt;
$.ajax({
    url: "&lt;?php $this-&gt;url("cities/get") ?&gt;"
})
.done(function() {
    alert("Done!");
});
&lt;/script&gt;</pre>
</div>
</div>
<div class="section" id="stand-alone-component">
<h2>Stand-Alone Component<a class="headerlink" href="#stand-alone-component" title="Permalink to this headline">¶</a></h2>
<p>All the components in Phalcon can be used as <em>glue</em> components individually because they are loosely coupled to each other. Using <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> in a stand alone mode can be demonstrated below:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon_View</span><span class="p">();</span>
<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s2">&quot;../app/views/&quot;</span><span class="p">);</span>

<span class="c1">// Passing variables to the views, these will be created as local variables</span>
<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;someProducts&quot;</span><span class="p">,</span> <span class="nv">$products</span><span class="p">);</span>
<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;someFeatureEnabled&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span>
<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s2">&quot;products&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">);</span>
<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">finish</span><span class="p">();</span>

<span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>


                    </div>
                  </div>
                </div>          
            </div>
          </td>  
        </tr>   
      </table>
    <div class="related">      
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tags.html" title="View Helpers"
             >next</a> |</li>
        <li class="right" >
          <a href="models.html" title="Working with Models"
             >previous</a> |</li> 
      </ul>
    </div>
        <div id="footer">
             &copy; Copyright 2012, Phalcon Team.
             Last updated on Aug 30, 2012.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
        </div>

    </div>

  </body>
</html>