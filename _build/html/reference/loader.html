
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Universal Class Loader &mdash; Phalcon 0.4.4 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/configurationblock.css" type="text/css" />
    <!--
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/layout.css" type="text/css" />
    -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Rosario" type="text/css">
    <!-- link rel="stylesheet" href="http://phalconphp.com/css/s.css" type="text/css" -->
    <link rel="stylesheet" href="../_static/s.css" type="text/css">    
    <link rel="stylesheet" href="../_static/docs.css" type="text/css">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <!--<script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>-->

    <script type="text/javascript">
    <!--
        $(document).ready(function() {
            $("#versions").change(function() {
                var docsUrl = $(this).val();
                window.location.href = docsUrl;
            });
        });
    -->
    </script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Phalcon 0.4.4 documentation" href="../index.html" />
    <link rel="next" title="Database Migrations" href="migrations.html" />
    <link rel="prev" title="Logging" href="logging.html" /> 
  </head>
  <body>
    <div id="wrapper">

      <div id="header">        
        <h1><a href="http://phalconphp.com/index" ><img border="0" src="../_static/img/logo-small.png"></a></h1>
        <div align="center">
          <div id="nav-main" role="navigation">
            <div class="menubar">
              <div class="nav-main-features nav-first"><a href="http://phalconphp.com/index" >HOME</a></div>
              <div class="nav-main-features nav-first"><a href="http://phalconphp.com/download" >DOWNLOAD</a></div>
              <div class="nav-main-features"><a href="http://docs.phalconphp.com" >DOCUMENTATION</a></div>
              <div class="nav-main-features"><a href="https://groups.google.com/forum/#!forum/phalcon">SUPPORT</a></div>
              <div class="nav-main-features nav-first"><a href="https://github.com/phalcon/cphalcon">GITHUB</a></div>
              <div class="nav-main-features"><a target="blog" href="http://blog.phalconphp.com/">BLOG</a></div>
            </div>
          </div>
        </div>
      </div>
    <div class="related">      
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="migrations.html" title="Database Migrations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="logging.html" title="Logging"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 0.4.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            
            <div id="searchbox" style="">
              <h3>Search</h3>
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="text" name="q" size="18">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Universal Class Loader</a><ul>
<li><a class="reference internal" href="#registering-namespaces">Registering Namespaces</a></li>
<li><a class="reference internal" href="#registering-directories">Registering Directories</a></li>
<li><a class="reference internal" href="#registering-classes">Registering Classes</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="logging.html"
                                  title="previous chapter">Logging</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="migrations.html"
                                  title="next chapter">Database Migrations</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/loader.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">  
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                <div class="body" >
                      
  <div class="section" id="universal-class-loader">
<h1>Universal Class Loader<a class="headerlink" href="#universal-class-loader" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../api/Phalcon_Loader.html"><em>Phalcon_Loader</em></a> is a component that allows you to load project classes automatically, based on some predefined rules. Since this component is written in C, it provides the lowest overhead in reading and interpreting external PHP files.</p>
<p>The behavior of this component is based on the PHP&#8217;s capability of <a class="reference external" href="http://www.php.net/manual/en/language.oop5.autoload.php">autoloading classes</a>. If a class that does not exist is used in any part of the code, a special handler will try to load it. <a class="reference internal" href="../api/Phalcon_Loader.html"><em>Phalcon_Loader</em></a> serves as the special handler for this operation. By loading classes on a need to load basis, the overall performance is increased since the only file reads that occur are for the files needed. This technique is called <a class="reference external" href="http://en.wikipedia.org/wiki/Lazy_initialization">lazy initialization</a>.</p>
<p><a class="reference internal" href="../api/Phalcon_Loader.html"><em>Phalcon_Loader</em></a> offers three options to autoload classes. You can use them one at a time or combine them.</p>
<div class="section" id="registering-namespaces">
<h2>Registering Namespaces<a class="headerlink" href="#registering-namespaces" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re organizing your code using namespaces, or external libraries do so, the registerNamespaces() provides the autoloading mechanism. It takes an associative array, which keys are namespace prefixes and their values are directories where the classes are located in. Remember always to add a trailing slash at the end of the paths.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Creates the autoloader</span>
<span class="nv">$loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon_Loader</span><span class="p">();</span>

<span class="c1">//Register some namespaces</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">registerNamespaces</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span>
           <span class="s2">&quot;Example\Base&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;vendor/example/base/&quot;</span><span class="p">,</span>
           <span class="s2">&quot;Example\Adapter&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;vendor/example/adapter/&quot;</span><span class="p">,</span>
           <span class="s2">&quot;Example&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;vendor/example/&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<span class="p">);</span>

<span class="c1">// register autoloader</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// The required class will automatically include the</span>
<span class="c1">// file vendor/example/adapter/Some.php</span>
<span class="nv">$some</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Example\Adapter\Some</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="registering-directories">
<h2>Registering Directories<a class="headerlink" href="#registering-directories" title="Permalink to this headline">¶</a></h2>
<p>The second option is to register directories, in which classes could be found. This option is not recommended in terms of performance, since Phalcon will need to perform a significant number of file stats on each folder, looking for the file with the same name as the class. It&#8217;s important to register the directories in relevance order. Remember always add a trailing slash at the end of the paths.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Creates the autoloader</span>
<span class="nv">$loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon_Loader</span><span class="p">();</span>

<span class="c1">// Register some directories</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">registerDirs</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;library/MyComponent/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;library/OtherComponent/Other/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;vendor/example/adapters/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;vendor/example/&quot;</span>
        <span class="p">)</span>
<span class="p">);</span>

<span class="c1">// register autoloader</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// The required class will automatically include the file from</span>
<span class="c1">// the first directory where it has been located</span>
<span class="c1">// i.e. library/OtherComponent/Other/Some.php</span>
<span class="nv">$some</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Some</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="registering-classes">
<h2>Registering Classes<a class="headerlink" href="#registering-classes" title="Permalink to this headline">¶</a></h2>
<p>The last option is to register the class name and its path. This autoloader can be very useful when the folder convention of the project does not allow for easy retrieval of the file using the path and the class name. This is the fastest method of autoloading. However the more your application grows, the more classes/files need to be added to this autoloader, which will effectively make maintenance of the class list very cumbersome and it is not recommended.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Creates the autoloader</span>
<span class="nv">$loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon_Loader</span><span class="p">();</span>

<span class="c1">// Register some directories</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">registerClasses</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;Some&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;library/OtherComponent/Other/Some.php&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Example\Base&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;vendor/example/adapters/Example/BaseClass.php&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<span class="p">);</span>

<span class="c1">// register autoloader</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>

<span class="c1">// Requiring a class will automatically include the file it references</span>
<span class="c1">// in the associative array</span>
<span class="c1">// i.e. library/OtherComponent/Other/Some.php</span>
<span class="nv">$some</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Some</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>


                    </div>
                  </div>
                </div>          
            </div>
          </td>  
        </tr>   
      </table>
    <div class="related">      
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="migrations.html" title="Database Migrations"
             >next</a> |</li>
        <li class="right" >
          <a href="logging.html" title="Logging"
             >previous</a> |</li> 
      </ul>
    </div>
        <div id="footer">
             &copy; Copyright 2012, Phalcon Team.
             Last updated on Aug 30, 2012.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
        </div>

    </div>

  </body>
</html>