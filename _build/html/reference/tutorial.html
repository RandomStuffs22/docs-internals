
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial: Let’s learn by example &mdash; Phalcon 0.4.4 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/configurationblock.css" type="text/css" />
    <!--
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/layout.css" type="text/css" />
    -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Rosario" type="text/css">
    <!-- link rel="stylesheet" href="http://phalconphp.com/css/s.css" type="text/css" -->
    <link rel="stylesheet" href="../_static/s.css" type="text/css">    
    <link rel="stylesheet" href="../_static/docs.css" type="text/css">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <!--<script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/configurationblock.js"></script>-->

    <script type="text/javascript">
    <!--
        $(document).ready(function() {
            $("#versions").change(function() {
                var docsUrl = $(this).val();
                window.location.href = docsUrl;
            });
        });
    -->
    </script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Phalcon 0.4.4 documentation" href="../index.html" />
    <link rel="next" title="The MVC Architecture" href="mvc.html" />
    <link rel="prev" title="Nginx Installation Notes" href="nginx.html" /> 
  </head>
  <body>
    <div id="wrapper">

      <div id="header">        
        <h1><a href="http://phalconphp.com/index" ><img border="0" src="../_static/img/logo-small.png"></a></h1>
        <div align="center">
          <div id="nav-main" role="navigation">
            <div class="menubar">
              <div class="nav-main-features nav-first"><a href="http://phalconphp.com/index" >HOME</a></div>
              <div class="nav-main-features nav-first"><a href="http://phalconphp.com/download" >DOWNLOAD</a></div>
              <div class="nav-main-features"><a href="http://docs.phalconphp.com" >DOCUMENTATION</a></div>
              <div class="nav-main-features"><a href="https://groups.google.com/forum/#!forum/phalcon">SUPPORT</a></div>
              <div class="nav-main-features nav-first"><a href="https://github.com/phalcon/cphalcon">GITHUB</a></div>
              <div class="nav-main-features"><a target="blog" href="http://blog.phalconphp.com/">BLOG</a></div>
            </div>
          </div>
        </div>
      </div>
    <div class="related">      
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="mvc.html" title="The MVC Architecture"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nginx.html" title="Nginx Installation Notes"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 0.4.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            
            <div id="searchbox" style="">
              <h3>Search</h3>
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="text" name="q" size="18">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Tutorial: Let&#8217;s learn by example</a><ul>
<li><a class="reference internal" href="#checking-your-installation">Checking your installation</a></li>
<li><a class="reference internal" href="#creating-a-project">Creating a project</a><ul>
<li><a class="reference internal" href="#file-structure">File structure</a></li>
<li><a class="reference internal" href="#beautiful-urls">Beautiful URLs</a></li>
<li><a class="reference internal" href="#bootstrap">Bootstrap</a></li>
<li><a class="reference internal" href="#creating-a-controller">Creating a Controller</a></li>
<li><a class="reference internal" href="#sending-output-to-a-view">Sending output to a view</a></li>
<li><a class="reference internal" href="#designing-a-sign-up-form">Designing a sign up form</a></li>
<li><a class="reference internal" href="#creating-a-model">Creating a Model</a></li>
<li><a class="reference internal" href="#setting-a-database-connection">Setting a Database Connection</a></li>
<li><a class="reference internal" href="#storing-data-using-models">Storing data using models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
<li><a class="reference internal" href="#sample-applications">Sample Applications</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="nginx.html"
                                  title="previous chapter">Nginx Installation Notes</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="mvc.html"
                                  title="next chapter">The MVC Architecture</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/tutorial.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">  
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                <div class="body" >
                      
  <div class="section" id="tutorial-let-s-learn-by-example">
<h1>Tutorial: Let&#8217;s learn by example<a class="headerlink" href="#tutorial-let-s-learn-by-example" title="Permalink to this headline">¶</a></h1>
<p>Throughout this tutorial, we&#8217;ll walk you through the creation of an application with a simple registration form from the ground up. We will also explain the basic aspects of the framework&#8217;s behavior. If you are interested in automatic code generation tools for Phalcon, you can check our <a class="reference external" href="tools">developer tools</a>.</p>
<div class="section" id="checking-your-installation">
<h2>Checking your installation<a class="headerlink" href="#checking-your-installation" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll assume you have Phalcon installed already. Check your phpinfo() output for a section referencing &#8220;Phalcon&#8221; or execute the code snippet below:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="nb">print_r</span><span class="p">(</span><span class="nb">get_loaded_extensions</span><span class="p">());</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>The Phalcon extension should appear as part of the output:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">Array</span>
<span class="x">(</span>
<span class="x">    [0] =&gt; Core</span>
<span class="x">    [1] =&gt; libxml</span>
<span class="x">    [2] =&gt; filter</span>
<span class="x">    [3] =&gt; SPL</span>
<span class="x">    [4] =&gt; standard</span>
<span class="x">    [5] =&gt; phalcon</span>
<span class="x">    [6] =&gt; mysql</span>
<span class="x">    [7] =&gt; mysqli</span>
<span class="x">)</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-project">
<h2>Creating a project<a class="headerlink" href="#creating-a-project" title="Permalink to this headline">¶</a></h2>
<p>The best way to use this guide is to follow each step in turn. You can get the complete code <a href="#id3"><span class="problematic" id="id4">here_</span></a>.</p>
<div class="section" id="file-structure">
<h3>File structure<a class="headerlink" href="#file-structure" title="Permalink to this headline">¶</a></h3>
<p>Phalcon does not impose a particular file structure for application development. Due to the fact that it is loosely coupled, you can implement Phalcon powered applications with a file structure you are most comfortable using.</p>
<p>For the purposes of this tutorial and as a starting point, we suggest the following structure:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">test/</span>
<span class="x">  app/</span>
<span class="x">    controllers/</span>
<span class="x">    models/</span>
<span class="x">    views/</span>
<span class="x">  public/</span>
<span class="x">    css/</span>
<span class="x">    img/</span>
<span class="x">    js/</span>
</pre></div>
</div>
<p>Note that you don&#8217;t need any &#8220;library&#8221; directory related to Phalcon. The framework is available in memory, ready for you to use.</p>
</div>
<div class="section" id="beautiful-urls">
<h3>Beautiful URLs<a class="headerlink" href="#beautiful-urls" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ll use pretty (friendly) urls for this tutorial. Friendly URLs are better for SEO as well as they are easy for users to remember. Phalcon supports rewrite modules provided by the most popular web servers. Making your application&#8217;s URLs friendly is not a requirement and you can just as easy develop without them.</p>
<p>In this example we&#8217;ll use the rewrite module for Apache. Let&#8217;s create a couple of rewrite rules in the /.htaccess file:</p>
<div class="highlight-apacheconf"><div class="highlight"><pre><span class="c">#/.htaccess</span>
<span class="nt">&lt;IfModule</span> <span class="s">mod_rewrite.c</span><span class="nt">&gt;</span>
    <span class="nb">RewriteEngine</span> <span class="k">on</span>
    <span class="nb">RewriteRule</span>  ^$ public/    [L]
    <span class="nb">RewriteRule</span>  (.*) public/$1 [L]
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</div>
<p>All requests to the project will be rewritten to the public/ directory making it the document root. This step ensures that the internal project folders remain hidden from public viewing and thus posing security threats.</p>
<p>The second set of rules will check if the requested file exists, and if it does it doesn&#8217;t have to be rewitten by the web server module:</p>
<div class="highlight-apacheconf"><div class="highlight"><pre><span class="c">#/public/.htaccess</span>
<span class="nt">&lt;IfModule</span> <span class="s">mod_rewrite.c</span><span class="nt">&gt;</span>
    <span class="nb">RewriteEngine</span> <span class="k">On</span>
    <span class="nb">RewriteCond</span> %{REQUEST_FILENAME} !-d
    <span class="nb">RewriteCond</span> %{REQUEST_FILENAME} !-f
    <span class="nb">RewriteRule</span> ^(.*)$ index.php?_url=$1 [QSA,L]
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="bootstrap">
<h3>Bootstrap<a class="headerlink" href="#bootstrap" title="Permalink to this headline">¶</a></h3>
<p>The first file you need to create is the bootstrap file. This file is very important; since it serves as the base of your application, giving you control of all aspects of it. In this file you can implement initialization of components as well as application behavior.</p>
<p>Now we&#8217;ll use the tools provided by the framework to implement MVC architecture with Phalcon. The <a class="reference internal" href="../api/Phalcon_Controller_Front.html"><em>Phalcon_Controller_Front</em></a> will easily allow us to request the MVC flow. This class automatically will instantiate Phalcon classes required to initialize the MVC. The public/index.php file should look like:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">try</span> <span class="p">{</span>

     <span class="nv">$front</span> <span class="o">=</span> <span class="nx">Phalcon_Controller_Front</span><span class="o">::</span><span class="na">getInstance</span><span class="p">();</span>

     <span class="c1">// Setting directories</span>
     <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">setControllersDir</span><span class="p">(</span><span class="s2">&quot;../app/controllers/&quot;</span><span class="p">);</span>
     <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">setModelsDir</span><span class="p">(</span><span class="s2">&quot;../app/models/&quot;</span><span class="p">);</span>
     <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s2">&quot;../app/views/&quot;</span><span class="p">);</span>

     <span class="c1">// Printing view output</span>
     <span class="k">echo</span> <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">dispatchLoop</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">();</span>

<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Phalcon_Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">echo</span> <span class="s2">&quot;PhalconException: &quot;</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../api/Phalcon_Controller_Front.html"><em>Phalcon_Controller_Front</em></a> purpose is to initialize the request environment, route the incoming request, and then dispatch any discovered actions; it aggregates any responses and returns them when the process is complete. As you can see, the file is very simple and we do not need to include any additional files or register autoloaders.</p>
</div>
<div class="section" id="creating-a-controller">
<h3>Creating a Controller<a class="headerlink" href="#creating-a-controller" title="Permalink to this headline">¶</a></h3>
<p>By default Phalcon will look for a controller named &#8220;Index&#8221;. It is the starting point when no controller or action has been passed in the request. The index controller (app/controllers/IndexController.php) looks like:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">IndexController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">&quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The controller classes must have the suffix &#8220;Controller&#8221; and controller actions must have the suffix &#8220;Action&#8221;. If you access the application from your browser, you should see something like this:</p>
<div class="figure align-center">
<img alt="../_images/tutorial-1.png" src="../_images/tutorial-1.png" />
</div>
<p>Congratulations, you&#8217;re flying with Phalcon!</p>
</div>
<div class="section" id="sending-output-to-a-view">
<h3>Sending output to a view<a class="headerlink" href="#sending-output-to-a-view" title="Permalink to this headline">¶</a></h3>
<p>Sending output on the screen from the controller is at times necessary but not desirable as most purists in the MVC community will attest. Everything must be passed to the view which is responsible for outputting data on screen. Phalcon will look for a view with the same name as the last executed action inside a directory named as the last executed controller. In our case (app/views/index/index.phtml):</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="s2">&quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Our controller (app/controllers/IndexController.php) now has an empty action definition:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">IndexController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The browser output should remain the same. The <a class="reference internal" href="../api/Phalcon_View.html"><em>Phalcon_View</em></a> static component is automatically created when the action execution has ended. Learn more about views usage <a class="reference external" href="views.html">here</a> .</p>
</div>
<div class="section" id="designing-a-sign-up-form">
<h3>Designing a sign up form<a class="headerlink" href="#designing-a-sign-up-form" title="Permalink to this headline">¶</a></h3>
<p>Now we will change the index.phtml view file, to add a link to a new controller named &#8220;signup&#8221;. The goal is to allow users to sign up in our application.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">echo</span> <span class="s2">&quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">linkTo</span><span class="p">(</span><span class="s2">&quot;signup&quot;</span><span class="p">,</span> <span class="s2">&quot;Sign Up Here!&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The generated HTML code displays an &#8220;A&#8221; html tag linking to a new controller:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Hello!<span class="nt">&lt;/h1&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/test/signup&quot;</span> <span class="nt">&gt;</span>Sign Up Here!<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p>To generate the tag we use the class <a class="reference internal" href="../api/Phalcon_Tag.html"><em>Phalcon_Tag</em></a>. This is a utility class that allows us to build HTML tags with framework conventions in mind. A more detailed article regarding HTML generation can be found <a class="reference external" href="tags.html">here</a></p>
<div class="figure align-center">
<img alt="../_images/tutorial-2.png" src="../_images/tutorial-2.png" />
</div>
<p>Here is the controller Signup (app/controllers/SignupController.php):</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">SignupController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The empty index action gives the clean pass to a view with the form definition:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;h2&gt;</span>Sign using this form<span class="nt">&lt;/h2&gt;</span>

<span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">form</span><span class="p">(</span><span class="s2">&quot;signup/register&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>

 <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">textField</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>
 <span class="nt">&lt;/p&gt;</span>

 <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;</span>E-Mail<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">textField</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>
 <span class="nt">&lt;/p&gt;</span>

 <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">submitButton</span><span class="p">(</span><span class="s2">&quot;Register&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>
 <span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p><em>NOTE</em>: If you have short_open_tag = Off in your php.ini file, you can modify the view as such:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;h2&gt;</span>Sign using this form<span class="nt">&lt;/h2&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">form</span><span class="p">(</span><span class="s2">&quot;signup/register&quot;</span><span class="p">);</span> <span class="cp">?&gt;</span>

 <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">textField</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">);</span> <span class="cp">?&gt;</span>
 <span class="nt">&lt;/p&gt;</span>

 <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>E-Mail<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">textField</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">);</span> <span class="cp">?&gt;</span>
 <span class="nt">&lt;/p&gt;</span>

 <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon_Tag</span><span class="o">::</span><span class="na">submitButton</span><span class="p">(</span><span class="s2">&quot;Register&quot;</span><span class="p">);</span> <span class="cp">?&gt;</span>
 <span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>Viewing the form in your browser will show something like this:</p>
<div class="figure align-center">
<img alt="../_images/tutorial-3.png" src="../_images/tutorial-3.png" />
</div>
<p><a class="reference internal" href="../api/Phalcon_Tag.html"><em>Phalcon_Tag</em></a> also provides useful methods to build form elements.</p>
<p>The Phalcon_Tag::form method receives only one parameter for instance, a relative uri to a controller/action in the application.</p>
<p>By clicking the &#8220;Send&#8221; button, you will notice an exception thrown from the framework, indicating that we are missing the &#8220;register&#8221; action in the controller &#8220;signup&#8221;. This exception is thrown by our public/index.php file:</p>
<blockquote>
<div>PhalconException: Action &#8220;register&#8221; was not found on controller &#8220;signup&#8221;</div></blockquote>
<p>Implementing that method will remove the exception:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">SignupController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">registerAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>If you click the &#8220;Send&#8221; button again, you will see a blank page. The name and email input provided by the user should be stored in a database. According to MVC guidelines, database interactions must be done through models so as to ensure clean object oriented code.</p>
</div>
<div class="section" id="creating-a-model">
<h3>Creating a Model<a class="headerlink" href="#creating-a-model" title="Permalink to this headline">¶</a></h3>
<p>Phalcon brings the first ORM for PHP entirely written in C-language. Instead of increasing the complexity of development, it simplifies it.</p>
<p>Before creating our first model, we need a database table to map it to. A simple table to store registered users can be defined like this:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">70</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">email</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">70</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>A model should be located in the app/models directory. The model mapping to &#8220;users&#8221; table:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">Users</span> <span class="k">extends</span> <span class="nx">Phalcon_Model_Base</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-a-database-connection">
<h3>Setting a Database Connection<a class="headerlink" href="#setting-a-database-connection" title="Permalink to this headline">¶</a></h3>
<p>In order to be able to use a database connection and subsequently access data through our models, we need to specify it in our bootstrap process. The <a class="reference internal" href="../api/Phalcon_Controller_Front.html"><em>Phalcon_Controller_Front</em></a> config in the bootstrap file should be modified to add the database configuration settings:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">try</span> <span class="p">{</span>

    <span class="nv">$front</span> <span class="o">=</span> <span class="nx">Phalcon_Controller_Front</span><span class="o">::</span><span class="na">getInstance</span><span class="p">();</span>

    <span class="c1">//Setting up framework config</span>
    <span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon_Config</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span>
            <span class="s2">&quot;database&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;adapter&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Mysql&quot;</span><span class="p">,</span>
                <span class="s2">&quot;host&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                <span class="s2">&quot;username&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
                <span class="s2">&quot;password&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;cheetah&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;test_db&quot;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="s2">&quot;phalcon&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;controllersDir&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;../app/controllers/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;modelsDir&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;../app/models/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;viewsDir&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;../app/views/&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">);</span>
    <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">setConfig</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>

    <span class="c1">//Printing view output</span>
    <span class="k">echo</span> <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">dispatchLoop</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">();</span>

<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Phalcon_Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;PhalconException: &quot;</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You will notice that we have replaced the calls to setControllersDir, setModelsDir and setViewsDir on the controller with a configuration array which handles all this for us. This way the code is much cleaner and easier to maintain.</p>
<p>The <a class="reference internal" href="../api/Phalcon_Config.html"><em>Phalcon_Config</em></a> object used, can hold a number of information essential to the application and can be stored as an array on a different file or as an INI file.</p>
<p>With the correct database parameters, our models are ready to work and interact with the rest of the application.</p>
</div>
<div class="section" id="storing-data-using-models">
<h3>Storing data using models<a class="headerlink" href="#storing-data-using-models" title="Permalink to this headline">¶</a></h3>
<p>Receiving data from the form and storing them in the table is the next step.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">SignupController</span> <span class="k">extends</span> <span class="nx">Phalcon_Controller</span>
<span class="p">{</span>

    <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">registerAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">//Request variables from html form</span>
        <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getPost</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">);</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getPost</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">);</span>

        <span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Users</span><span class="p">();</span>
        <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
        <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">email</span> <span class="o">=</span> <span class="nv">$email</span><span class="p">;</span>

        <span class="c1">//Store and check for errors</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">()</span> <span class="o">==</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">&quot;Thanks for register!&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">&quot;Sorry, the next problems was generated: &quot;</span><span class="p">;</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getMessages</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">echo</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">&quot;&lt;br/&gt;&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>We can never trust data sent from a user. Variables passed into our application, from user input, need to have a filter applied to them so as to <a class="reference internal" href="filter.html"><em>validate/sanizite</em></a> their contents. This makes the application more secure because it avoids common attacks like SQL injections. In our tutorial we apply &#8220;string&#8221; to the &#8220;name&#8221; variable to ensure that user did not sent us any malicious characters. The component <a class="reference internal" href="../api/Phalcon_Filter.html"><em>Phalcon_Filter</em></a> makes this task trivial, since it is incorporated in the getPost call.</p>
<p>We then instantiate the Users class, which corresponds to a User record. The class public properties map to the fields of the record in the users table. Setting the relevant values in the new record and calling save() will store the data in the database for that record. The save() method returns a boolean value which informs us on whether the storing of the data was successful or not.</p>
<p>Additional validation happens automatically on fields that are not null (required). If we don&#8217;t type any of the required files our screen will look like this:</p>
<div class="figure align-center">
<img alt="../_images/tutorial-4.png" src="../_images/tutorial-4.png" />
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>This is a very simple tutorial and as you can see, it&#8217;s easy to start building an application using Phalcon. The fact that Phalcon is an extension on your web server has not interfered with the ease of development or features available. We invite you to continue reading the manual so that you can discover additional features offered by Phalcon!</p>
</div>
<div class="section" id="sample-applications">
<h2>Sample Applications<a class="headerlink" href="#sample-applications" title="Permalink to this headline">¶</a></h2>
<p>The following Phalcon powered applications are also available, providing more complete examples:</p>
<ul class="simple">
<li><a class="reference external" href="http://blog.phalconphp.com/post/20928554661/invo-a-sample-application">INVO application</a>: Invoice generation application. Allows for management of products, companies, product types. etc.</li>
<li><a class="reference external" href="http://blog.phalconphp.com/post/24622423072/sample-application-php-alternative-site">PHP Alternative website</a>: Multilingual and advanced routing application.</li>
</ul>
</div>
</div>


                    </div>
                  </div>
                </div>          
            </div>
          </td>  
        </tr>   
      </table>
    <div class="related">      
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="mvc.html" title="The MVC Architecture"
             >next</a> |</li>
        <li class="right" >
          <a href="nginx.html" title="Nginx Installation Notes"
             >previous</a> |</li> 
      </ul>
    </div>
        <div id="footer">
             &copy; Copyright 2012, Phalcon Team.
             Last updated on Aug 30, 2012.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
        </div>

    </div>

  </body>
</html>